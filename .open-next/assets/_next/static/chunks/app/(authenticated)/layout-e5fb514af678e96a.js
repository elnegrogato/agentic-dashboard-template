(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{3001:function(e,r,t){Promise.resolve().then(t.bind(t,7946)),Promise.resolve().then(t.bind(t,1293))},7946:function(e,r,t){"use strict";t.d(r,{S:function(){return o},SidebarProvider:function(){return s}});var a=t(7437),n=t(2265);let i=(0,n.createContext)(void 0);function s(e){let{children:r}=e,[t,s]=(0,n.useState)(!1);return(0,a.jsx)(i.Provider,{value:{isCollapsed:t,setIsCollapsed:s},children:r})}function o(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useSidebarContext must be used within a SidebarProvider");return e}},3438:function(e,r,t){"use strict";t.d(r,{pC:function(){return b},O3:function(){return h}});var a=t(2265),n=t(16),i=t(2711);let s="https://development-api.agenticstarter.com/v1",o={"Content-Type":"application/json"},l=e=>{if(!s)throw Error("NEXT_API_URL is not defined");return new URL("/v1"+e,s).toString()},c=e=>({...o,Authorization:"Bearer ".concat(e)});async function d(e){let r=l("/checkout"),t=await fetch(r,{method:"POST",headers:c(e),body:JSON.stringify({quantity:1,amount:100})});return(await t.json()).id}let u={credits:1e4};function h(){let{getToken:e}=(0,i.y)();return(0,n.a)({queryKey:["userCreditsRemaining"],queryFn:async()=>(await new Promise(e=>setTimeout(e,500)),u)})}function b(){let[e,r]=a.useState(!1),[t,n]=a.useState(null);return{getSessionId:async e=>{r(!0),n(null);try{let r=await d(e);if(!r)throw Error("Failed to create checkout session");return r}catch(e){throw n(e instanceof Error?e:Error("An unknown error occurred")),t}finally{r(!1)}},isLoading:e,error:t}}t(257).env.NEXT_PUBLIC_API_URL},1293:function(e,r,t){"use strict";var a=t(7437),n=t(7648),i=t(6536);t(2265);var s=t(9376),o=t(3438),l=t(3918),c=t(2711),d=t(8672),u=t(7946);let h="pk_test_51QagZV2QZaORG9dbTsDvEC3kAivGJNyz9dpsU8KUXVqRbDr9dAsb3uOJFum5UeJVSx7yy4xtsWh1qAzWUjJqaJMX00Wk6uBIF5";r.default=()=>{let{isCollapsed:e,setIsCollapsed:r}=(0,u.S)(),t=(0,s.usePathname)(),{getSessionId:b,isLoading:m,error:f}=(0,o.pC)(),{user:p}=(0,l.aF)(),{getToken:x}=(0,c.y)(),g=async()=>{try{let e=await x();if(!e)throw Error("No token available");let r=await b(e);if(!h)throw Error("No Stripe key available");let t=await (0,d.J)(h);if(!t)throw Error("Failed to load Stripe");let{error:a}=await t.redirectToCheckout({sessionId:r});a&&console.error("Stripe redirect failed:",a)}catch(e){console.error("Failed to purchase credits:",e)}};return(0,a.jsxs)("aside",{role:"complementary",className:"h-screen bg-gray-800 text-white transition-all duration-300 ease-in-out ".concat(e?"w-20":"w-64"," relative"),children:[(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[!e&&(0,a.jsx)("div",{className:"transition-opacity duration-300",children:(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Dashboard"})}),(0,a.jsx)("button",{onClick:()=>r(!e),className:"p-1 hover:bg-gray-700 rounded","aria-label":e?"Expand sidebar":"Collapse sidebar",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",role:"img","aria-hidden":"true",children:e?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("nav",{className:"mt-8",children:[(0,a.jsx)(n.default,{href:"/",className:"block py-2 px-4 mx-2 rounded transition-colors ".concat("/"===t?"bg-gray-700":"hover:bg-gray-700"),children:e?"\uD83E\uDD16":"Agents"}),(0,a.jsx)(n.default,{href:"/settings",className:"block py-2 px-4 mx-2 rounded transition-colors ".concat("/settings"===t?"bg-gray-700":"hover:bg-gray-700"),children:e?"⚙️":"Settings"})]}),(0,a.jsxs)("div",{className:"flex flex-col h-[calc(100%-12rem)]",children:[(0,a.jsx)("div",{className:"flex-grow"}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,a.jsx)(l.l8,{appearance:{baseTheme:i.dark}})}),!e&&p&&(0,a.jsxs)("div",{className:"p-4 border-t border-gray-700",children:[!p.publicMetadata.keyId&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",onClick:g,disabled:m,children:m?"Processing...":"Upgrade"}),(0,a.jsx)("div",{className:"mt-2"})]}),(0,a.jsx)("button",{className:"w-full bg-gray-700 text-gray-100 py-2 rounded-md hover:bg-gray-600 transition-colors disabled:opacity-50 border border-gray-600",onClick:()=>{(null==p?void 0:p.emailAddresses[0].emailAddress)?window.location.href="".concat("https://agenticstarter.com/subscription-management"):console.error("No email address found for the user")},children:"Manage Subscription"}),f&&(0,a.jsx)("p",{className:"mt-2 text-sm text-red-500",children:"Failed to purchase credits. Please try again."})]})]})]})}}},function(e){e.O(0,[711,763,16,469,971,117,744],function(){return e(e.s=3001)}),_N_E=e.O()}]);